<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nombre Super</title>
</head>
<body>
    <div>
        <div>
            <div>
                <div>
                    <div>
                        <h4>Alimentos Frescos</h4>
                        <div id="fresh">
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div>
                    <div>
                        <h4>Aseo</h4>
                        <div id="cleanliness">
                                
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div>
                    <div>
                        <h4>Alimentos Congelados</h4>
                        <div id="foods">
                                
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div>
                    <div>
                        <h4>Bebidas</h4>
                        <div id="drinks">
                            
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div>
                    <div>
                        <h4>Bebidas</h4>
                        <div id="drinks">
                                
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div>
                    <div>
                        <h4>Hogar</h4>
                        <div id="home">
                                
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div>
                    <div>
                        <h4>Cuidado personal</h4>
                        <div id="personal">
                                
                        </div>
                    </div>
                </div>
            </div>
        </div>
                            
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script>
        function filter(data, key) {
            return data.filter(function(item) {
                return item.cat_name === key;
            });
        }
        function showProducts() {
            $.get('http://localhost:3000/show_products', (data) => {
                data = data.response;
                if (data[1].status == 'ok') {
                    if (data[0].length > 0) {
                        console.log('Todo bien', data);
                        let fresh = filter(data[0], 'Alimentos Frescos');
                    } else {
                        console.warn('No hay productos');
                    }
                } else {
                    console.log('Algo salio mal');
                }
                console.log(data);
                let products = '';
                data[0].forEach(product => {
                    products = products + `

                        <div">
                            <div>
                                <div>
                                <img src="${product.prt_photo}.jpg" width="150" height="140">
                                <span>${product.prt_name}</span>
                                <a><i class="material-icons">Comprar</i></a>
                                </div>
                                <div style="max-height: 80px; min-height: 80px;">
                                <p>${product.cat_name}</p>
                                </div>
                            </div>
                            </div>
                    `;
                });
                $('#fresh').html(products);
            }, 'json');
        }
        $(document).ready(function(){
            showProducts();
        });
    </script>
</body>
</html>